@using Microsoft.AspNetCore.Identity
@using ProjectBoardWebApp.Areas.Identity.Data
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager



@if (SignInManager.IsSignedIn(User))
{
    <li class="has-user-block">
        <div id="user-block" class="collapse">
            <div class="item user-block">
                <!-- User picture-->
                <div class="user-block-picture">
                    <div class="user-block-status">
                        <img src="~/images/user/@UserManager.FindByNameAsync(User.Identity.Name).Result.ProfilePic" alt="Avatar" width="60" height="60" class="img-thumbnail rounded-circle" />
                        <div class="circle bg-danger circle-lg"></div>
                    </div>
                </div>
                <!-- Name and Job-->
                <div class="user-block-info">
                    <span class="user-block-name">Hello, @UserManager.FindByNameAsync(User.Identity.Name).Result.UserFullName</span>
                    <span class="user-block-role">Designer</span>
                    <div class="text-center">
                        <form id="logoutform" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                            <a class="text-dark" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">Manage Profile</a> | 
                            <a href="#" onclick="javascript:document.getElementById('logoutform').submit();" class="text-dark">Logout</a>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </li>
}
else
{
    <li class="has-user-block">
        <div id="user-block" class="collapse">
            <div class="item user-block">
    <li class="nav-heading">
        <span>Account</span>
    </li>

    <li>
        <a asp-area="Identity" asp-page="/Account/Register">
            <em class="icon-user"></em>
            <span data-localize="sidebar.nav.account.REGISTER">Register</span>
        </a>
    </li>
    <li>
        <a asp-area="Identity" asp-page="/Account/Login">
            <em class="icon-login"></em>
            <span data-localize="sidebar.nav.account.Login">Login</span>
        </a>
    </li>

    </div>
    </div>
    </li>


}



